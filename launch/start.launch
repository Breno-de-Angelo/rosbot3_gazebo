<?xml version="1.0" encoding="UTF-8"?>
<launch>
  <arg name="world" default="$(find-pkg-share rosbot3_gazebo)/worlds/willow_garage.world"/>
  <include file="$(find-pkg-share gazebo_ros)/launch/gzserver.launch.py">
    <arg name="world" value="$(var world)"/>
  </include>
  <include file="$(find-pkg-share gazebo_ros)/launch/gzclient.launch.py">
    <arg name="gui_required" value="true"/>
  </include>

  <arg name="model" default="$(find-pkg-share rosbot3_gazebo)/urdf/rosbot3.xacro"/>
  <node name="robot_state_publisher" pkg="robot_state_publisher" exec="robot_state_publisher">
    <param name="robot_description" value="$(command 'xacro $(var model)')" type="str"/>
  </node>

  <node name="spawn_rosbot3" pkg="gazebo_ros" exec="spawn_entity.py"
    args="-entity rosbot3 -topic /robot_description"
  />

  <node name="rviz2"
    pkg="rviz2"
    exec="rviz2"
    args="-d $(find-pkg-share rosbot3_description)/config/rosbot3.rviz"
  />

  <include file="$(find-pkg-share ros_commons)/launch/rqt_steering_with_tf_tree.launch"/>

  <include file="$(find-pkg-share nav2_collision_monitor)/launch/collision_monitor_node.launch.py">
    <arg name="params_file" value="$(find-pkg-share rosbot3_gazebo)/config/collision_monitor.yaml"/>
  </include>
  
</launch>
